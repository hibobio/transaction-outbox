{"title":"objects tx-outbox","description":"Transactional Outbox metrics for objects service - monitors Postgres/SingleStore outbox tables, publishing, and partition management","widgets":[{"id":1000000000000001,"definition":{"title":"üìä Queue Health","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1000000000000002,"definition":{"title":"Postgres Row Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.postgres.row.count{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":1000000000000003,"definition":{"title":"SingleStore Row Count ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.singlestore.row.count{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"orange","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":1000000000000004,"definition":{"title":"Postgres Partition Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.postgres.partition.count{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":3,"height":2}},{"id":1000000000000005,"definition":{"title":"‚ö†Ô∏è Default Partition Row Count (should be 0)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.postgres.default.partition.row.count{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":0,"width":3,"height":2}},{"id":7970381217318791,"definition":{"type":"note","content":"1. Note that postgres partitions (and data) are only deleted after 6 hours (if all data was processed from S2 outbox table)\n2. These gauge metrics have refresh delay (need to figure out why)","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":2,"width":9,"height":1}}]},"layout":{"x":0,"y":0,"width":12,"height":4}},{"id":2000000000000001,"definition":{"title":"üì® Outbox Items Flows","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2000000000000002,"definition":{"title":"Items Added to Outbox (by topic)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:tx.outbox.s2.items.added{*} by {topic}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"green","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":2000000000000003,"definition":{"title":"Items Published to Kafka (by topic)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:tx.outbox.s2.items.published{*} by {topic}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"cool","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":2000000000000004,"definition":{"title":"‚ùå Items Failed (by topic)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:tx.outbox.s2.items.failed{*} by {topic}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":8,"y":0,"width":4,"height":2}}]},"layout":{"x":0,"y":4,"width":12,"height":3}},{"id":3000000000000001,"definition":{"title":"üêò Postgres Operations","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3000000000000003,"definition":{"title":"PG Insert - P95 Latency (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.postgres.insert.time.95percentile{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":3000000000000005,"definition":{"title":"PG Select - P95 Latency (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.postgres.select.time.95percentile{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":3000000000000002,"definition":{"title":"PG Insert - Call Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.postgres.insert.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":3,"height":2}},{"id":3000000000000004,"definition":{"title":"PG Select - Call Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.postgres.select.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":0,"width":3,"height":2}}]},"layout":{"x":0,"y":7,"width":12,"height":1}},{"id":4751204802536189,"definition":{"title":"SingleStore Resource utilization","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":834112752647308,"definition":{"title":"CPU Utilization (%)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"vCPU Utilization","formula":"clamp_max(cutoff_min(((derivative(query5) / 1000) / query2) * 100, 0), 100)"}],"queries":[{"name":"query5","data_source":"metrics","query":"max:singlestoredb_cloud.cpu_used_ms{workspace_name:hibob-stage-objects} by {node}.rollup(max, 60)"},{"name":"query2","data_source":"metrics","query":"max:singlestoredb_cloud.num_cpus{workspace_name:hibob-stage-objects} by {node}.rollup(max, 60)"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"max":"100"}},"layout":{"x":0,"y":0,"width":4,"height":3}},{"id":362908705661385,"definition":{"title":"Memory Utilization (%)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Memory Usage","formula":"(query1 / query2) * 100"}],"queries":[{"name":"query1","data_source":"metrics","query":"max:singlestoredb_cloud.mem_used_b{workspace_name:hibob-stage-objects} by {node}"},{"name":"query2","data_source":"metrics","query":"max:singlestoredb_cloud.mem_total_b{workspace_name:hibob-stage-objects} by {node}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"max":"100"}},"layout":{"x":4,"y":0,"width":4,"height":3}},{"id":1420043952065106,"definition":{"title":"Persistent Cache Utilization (%)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Cache Usage","formula":"(query1 / query2) * 100"}],"queries":[{"name":"query1","data_source":"metrics","query":"max:singlestoredb_cloud.disk_used_b{workspace_name:hibob-stage-objects} by {node}"},{"name":"query2","data_source":"metrics","query":"max:singlestoredb_cloud.disk_total_b{workspace_name:hibob-stage-objects} by {node}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"max":"100"}},"layout":{"x":8,"y":0,"width":4,"height":3}}]},"layout":{"x":0,"y":8,"width":12,"height":4}},{"id":6232936025434175,"definition":{"title":"ED Subobject write operations","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8221058690071072,"definition":{"title":"P95 DAO insert time (includes DAO lock)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.dao.insert.time.95percentile{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":7755704105407370,"definition":{"title":"P95 DAO update time (includes DAO lock)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.dao.update.time.95percentile{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":3716699362845692,"definition":{"title":"P95 Metadata lookup time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.service.get.field.lookup.time.95percentile{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":3,"height":2}},{"id":7656681781238505,"definition":{"title":"P95 Schedule history table job time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.service.schedule.history.table.job.time.95percentile{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":0,"width":3,"height":2}},{"id":7823968727916734,"definition":{"title":"Max DAO insert time (includes DAO lock)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.dao.insert.time.max{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":3,"height":2}},{"id":931665212082477,"definition":{"title":"Max DAO update time (includes DAO lock)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.dao.update.time.max{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":2,"width":3,"height":2}},{"id":2165433891791169,"definition":{"title":"Max Metadata lookup time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.service.get.field.lookup.time.max{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":2,"width":3,"height":2}},{"id":8550441336535321,"definition":{"title":"Max Schedule history table job time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:ed.subobjects.service.schedule.history.table.job.time.max{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":2,"width":3,"height":2}}]},"layout":{"x":0,"y":12,"width":12,"height":5}},{"id":4000000000000001,"definition":{"title":"‚ö° SingleStore Operations","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4000000000000003,"definition":{"title":"S2 Select - P95 Latency (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.singlestore.select.time.95percentile{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"orange","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":4000000000000005,"definition":{"title":"S2 Insert - P95 Latency (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.singlestore.insert.time.95percentile{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"cool","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":4000000000000007,"definition":{"title":"S2 Delete - P95 Latency (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.singlestore.delete.time.95percentile{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":4000000000000002,"definition":{"title":"S2 Select - Call Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.singlestore.select.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"orange","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":4000000000000004,"definition":{"title":"S2 Insert - Call Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.singlestore.insert.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"cool","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":4000000000000006,"definition":{"title":"S2 Delete - Call Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.singlestore.delete.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":5,"is_column_break":true}},{"id":5000000000000001,"definition":{"title":"üöÄ Publishing & Locking","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5000000000000005,"definition":{"title":"Max time waiting for locks","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.lock.wait.time.max{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":4907753944474490,"definition":{"title":"P95 time waiting for locks","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.lock.wait.time.95percentile{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":5000000000000003,"definition":{"title":"Batch Publish - P95 Latency (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.batch.publish.time.95percentile{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"green","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":3,"height":2}},{"id":5000000000000002,"definition":{"title":"Batch Publish Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.batch.publish.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"green","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":0,"width":3,"height":2}},{"id":807748948280907,"definition":{"title":"P95 Lock existence check time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.ensure.lock.rows.exist.time.95percentile{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":3,"height":2}},{"id":5000000000000004,"definition":{"title":"Partition locks acquired (or timeout)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:tx.outbox.s2.partition.lock.wait.time.count{*} by {topic,partition}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":2,"width":3,"height":2}},{"id":2166006286256014,"definition":{"title":"P95 Transaction duration (per host only)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.transaction.time.95percentile{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":2,"width":3,"height":2}},{"id":8109162064419139,"definition":{"title":"Committed transaction count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:tx.outbox.s2.transaction.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":2,"width":3,"height":2}},{"id":2000455491103038,"definition":{"title":"P95 Transaction pre-commit duration","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.commitstart.time.95percentile{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":3,"height":2}},{"id":6891729654458739,"definition":{"title":"P95 Transaction commit only duration","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.commit.time.95percentile{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":4,"width":3,"height":2}},{"id":5801766931556088,"definition":{"title":"Transactions in commit phase","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:tx.outbox.s2.transactions.commit.phase.count{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":4,"width":3,"height":2}},{"id":1767857671519575,"definition":{"title":"P95 Lock hold time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.lock.hold.time.95percentile{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":4,"width":3,"height":2}},{"id":1777761011983025,"definition":{"title":"Transactions that will acquire locks","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:tx.outbox.s2.partition.ensure.lock.rows.exist.time.count{*} by {topic,partition}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":6,"width":3,"height":2}},{"id":4891636641129044,"definition":{"title":"Max Transaction commit only duration","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.commit.time.max{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":6,"width":3,"height":2}},{"id":8364616385209851,"definition":{"title":"Lock acquire count (or timeout)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.lock.wait.time.count{*} by {topic,partition}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":6,"width":3,"height":2}},{"id":1835492753778628,"definition":{"title":"Max Lock hold time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.lock.hold.time.max{*} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":6,"width":3,"height":2}},{"id":8145729002638473,"definition":{"title":"P95 time waiting for locks - key-based lock","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.event.key.lock.wait.time.95percentile{*} by {topic}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":8,"width":3,"height":2}},{"id":3580917331538275,"definition":{"title":"P95 Transaction pre-commit duration","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.event.key.commitstart.time.95percentile{*} by {topic}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":8,"width":3,"height":2}},{"id":3280880383850146,"definition":{"title":"P95 Lock hold time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.event.key.lock.hold.time.95percentile{*} by {topic}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":8,"width":3,"height":2}},{"id":5692675215347779,"definition":{"title":"P95 Transaction commit only duration","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.event.key.commit.time.95percentile{*} by {topic,partition}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":8,"width":3,"height":2}}]},"layout":{"x":0,"y":5,"width":12,"height":11}},{"id":6000000000000001,"definition":{"title":"üßπ Partition Cleanup","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6000000000000002,"definition":{"title":"Cleanup Get Min ID - Call Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.cleanup.get.min.id.time.count{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"grey","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":6,"height":2}},{"id":6000000000000003,"definition":{"title":"Cleanup Get Min ID - P95 Latency (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:tx.outbox.s2.partition.cleanup.get.min.id.time.95percentile{*}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"grey","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":6,"height":2}}]},"layout":{"x":0,"y":16,"width":12,"height":1}},{"id":3100870641263534,"definition":{"title":"SingleStore DB connections","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":17208588439807,"definition":{"title":"Active connections","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.active{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":3111167310705402,"definition":{"title":"Idle connections","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.idle{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"green","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":3111167310705401,"definition":{"title":"Total connections (active + idle)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":3,"height":2}},{"id":3111167310705403,"definition":{"title":"‚ö†Ô∏è Pending connections (waiting)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.pending{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":0,"width":3,"height":2}},{"id":3111167310705404,"definition":{"title":"Max pool size","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.max{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":3,"height":2}},{"id":3111167310705405,"definition":{"title":"Min pool size","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.min{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"purple","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":2,"width":3,"height":2}},{"id":3111167310705406,"definition":{"title":"‚ùå Connection timeouts","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:hikaricp.connections.timeout{service:objects , pool:singlestore} by {host}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"warm","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":2,"width":3,"height":2}},{"id":3111167310705407,"definition":{"title":"Connection acquire - P95 (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.acquire.95percentile{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"orange","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":2,"width":3,"height":2}},{"id":3111167310705408,"definition":{"title":"Connection creation - P95 (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.creation.95percentile{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"cool","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":3,"height":2}},{"id":3111167310705409,"definition":{"title":"Connection usage - P95 (ms)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:hikaricp.connections.usage.95percentile{service:objects , pool:singlestore} by {host}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"cool","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":4,"width":3,"height":2}}]},"layout":{"x":0,"y":17,"width":12,"height":7}}],"template_variables":[],"layout_type":"ordered","notify_list":[],"pause_auto_refresh":false,"reflow_type":"fixed"}