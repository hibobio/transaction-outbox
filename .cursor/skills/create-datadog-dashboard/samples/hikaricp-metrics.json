{"title":"Hibob's HikariCP Metrics","description":"[[suggested_dashboards]]","widgets":[{"id":1770932502036445,"definition":{"title":"Current connection counts (active, idle, total) (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":6,"height":4}},{"id":5850443446223287,"definition":{"title":"Connection usage time P95 (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.usage.95percentile{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":6,"height":4}},{"id":6762526541281275,"definition":{"title":"Time to acquire a connection P95 (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.acquire.95percentile{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":6,"height":4}},{"id":7684674405888664,"definition":{"title":"Threads waiting for connection (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.pending{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":4,"width":6,"height":4}},{"id":4395602338679867,"definition":{"title":"Connection creation time P95 (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.creation.95percentile{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":8,"width":6,"height":4}},{"id":7175388971548980,"definition":{"title":"Number of active connections (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.active{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":8,"width":6,"height":4}},{"id":6924531960282203,"definition":{"title":"Pool utilization % (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:hikaricp.connections.active{service:hibob* , pool:master} by {service}.weighted()"},{"data_source":"metrics","name":"query2","query":"sum:hikaricp.connections.max{service:hibob* , pool:master} by {service}.weighted()"}],"formulas":[{"alias":"Pool utilization percentage","formula":"(query1 / query2) * 100"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":12,"width":6,"height":4}},{"id":4413035618294242,"definition":{"title":"Number of idle connections (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.idle{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":12,"width":6,"height":4}},{"id":8484261254208229,"definition":{"title":"Number of active connections per deployment/service (Pool: master)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.active{service:hibob* , pool:master} by {service}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":16,"width":6,"height":4}},{"id":8022059097874916,"definition":{"title":"Connections per pod per deployment type ","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6328056862653590,"definition":{"title":"[hibob] Number of active connections per deployment/pod (Pool: master) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.active{service:hibob , pool:master} by {service,kube_node}"}],"formulas":[{"formula":"autosmooth(query1)"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":6,"height":4}},{"id":7105977748248368,"definition":{"title":"[hibob-worker] Number of active connections per deployment/pod (Pool: master) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.active{service:hibob-worker , pool:master} by {service,kube_node}"}],"formulas":[{"formula":"autosmooth(query1)"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":6,"height":4}},{"id":2919104671278744,"definition":{"title":"[hibob-api] Number of active connections per deployment/pod (Pool: master) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.active{service:hibob-api , pool:master} by {service,kube_node}"}],"formulas":[{"formula":"autosmooth(query1)"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":6,"height":4}},{"id":718899171509749,"definition":{"title":"[hibob-kpi] Number of active connections per deployment/pod (Pool: master) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:hikaricp.connections.active{service:hibob-kpi , pool:master} by {service,kube_node}"}],"formulas":[{"formula":"autosmooth(query1)"}],"style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":4,"width":6,"height":4}}]},"layout":{"x":0,"y":0,"width":12,"height":9,"is_column_break":true}}],"template_variables":[{"name":"metadata","prefix":"@service","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"pause_auto_refresh":false,"reflow_type":"fixed"}